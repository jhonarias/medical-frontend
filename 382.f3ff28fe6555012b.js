"use strict";(self.webpackChunkfrontend_practice=self.webpackChunkfrontend_practice||[]).push([[382],{5795:(X,f,a)=>{a.r(f),a.d(f,{AnswersContainerModule:()=>W});var c=a(6814),i=a(95),l=a(1076),m=a(7944),d=(()=>((d=d||{}).ACTIVE="Active",d.INACTIVE="Inactive",d))(),t=a(9468),b=a(9126),p=a(1594),Z=a(9862);let _=(()=>{class n extends b.Y{constructor(e){super(e),this.httpClient=e}retrieveAnswers(){return this.get(p.N.apiURLAnswer,"")}getAnswerById(e){return this.get(p.N.apiURLAnswer,e)}updateAnswer(e){return this.put(p.N.apiURLAnswer+"/"+e._id,"",e)}createAnswers(e){return this.post(p.N.apiURLAnswer,"",e)}deleteAnswer(e){return this.delete(p.N.apiURLAnswer+"/"+e,"")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Z.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var q=a(8110);function I(n,s){1&n&&(t.TgZ(0,"p",11),t._uU(1,"Ingresa la descripci\xf3n"),t.qZA())}function T(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"option",12),t._uU(2),t.qZA(),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}let w=(()=>{class n{constructor(){this.form=new i.cw({}),this.statusList=[],this.index=0}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["answer-create-form"]],inputs:{form:"form",statusList:"statusList",index:"index"},decls:16,vars:5,consts:[[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description","placeholder","Descripci\xf3n",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","isCorrect",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],["for","status",1,"form-label"],["id","status","autocomplete","status","placeholder","status","formControlName","status",1,"form-control"],[4,"ngFor","ngForOf"],[1,"text-danger"],[3,"value"]],template:function(e,r){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"label",2),t._uU(3,"Descripci\xf3n"),t.qZA(),t._UZ(4,"textarea",3),t.YNc(5,I,2,0,"p",4),t.qZA(),t.TgZ(6,"div",1)(7,"div",5),t._UZ(8,"input",6),t.TgZ(9,"label",7),t._uU(10,"Marcar como correcta"),t.qZA()()(),t.TgZ(11,"div",1)(12,"label",8),t._uU(13,"Estado"),t.qZA(),t.TgZ(14,"select",9),t.YNc(15,T,3,2,"ng-container",10),t.qZA()()()),2&e){let o;t.Q6J("formGroup",r.form),t.xp6(5),t.Q6J("ngIf",(null==(o=r.form.get("description"))?null:o.invalid)&&((null==(o=r.form.get("description"))?null:o.dirty)||(null==(o=r.form.get("description"))?null:o.touched))),t.xp6(3),t.Q6J("id","isCorrect"+r.index),t.xp6(1),t.Q6J("for","isCorrect"+r.index),t.xp6(6),t.Q6J("ngForOf",r.statusList)}},dependencies:[c.sg,c.O5,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u],encapsulation:2}),n})();const y=["modalContent"];function N(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h1",4),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij("Crear respuesta de la pregunta ",e.questionId,"")}}function Q(n,s){1&n&&(t.TgZ(0,"h1",4),t._uU(1,"Crear respuesta"),t.qZA())}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"h4",6),t._uU(2),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.KtG(u.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",8)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",9)(8,"button",10),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.KtG(u.close("Close click"))}),t._uU(9,"Cerrar"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.modalModel.title),t.xp6(4),t.Oqu(e.modalModel.description)}}function L(n,s){1&n&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",12)(3,"span",13),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function k(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",21)(2,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,u=t.oxw(2);return t.KtG(u.deleteForm(o))}),t._uU(3,"Eliminar respuesta"),t.qZA()(),t.BQk()}}function U(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",16),t._uU(2),t.qZA(),t._UZ(3,"answer-create-form",20),t.YNc(4,k,4,0,"ng-container",3),t.BQk()),2&n){const e=s.$implicit,r=s.index,o=t.oxw(2);t.xp6(2),t.hij("Respuesta ",r+1,""),t.xp6(1),t.Q6J("form",e)("statusList",o.statusList)("index",r),t.xp6(1),t.Q6J("ngIf",1!==o.forms.controls.length)}}function J(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,U,5,5,"ng-container",14),t.TgZ(2,"div",15)(3,"div",16)(4,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addForm())}),t._uU(5,"Agregar respuesta"),t.qZA()(),t.TgZ(6,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.validate())}),t.TgZ(7,"span",19),t._uU(8," Guardar respuesta(s) "),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.forms.controls),t.xp6(5),t.Q6J("disabled",e.isLoading?"disabled":null)}}let h=(()=>{class n{constructor(e,r,o,u){this.answerHttpService=e,this.route=r,this.router=o,this.modalService=u,this.questionId="",this.forms=new i.Oe([]),this.statusList=[],this.isLoading=!1,this.modalModel={title:"",description:""}}ngOnInit(){this.internalInit()}addForm(){const e=new i.cw({description:new i.NI("",[i.kI.required]),isCorrect:new i.NI(!1,[i.kI.required]),status:new i.NI(d.ACTIVE,[i.kI.required])});this.forms.push(e)}deleteForm(e){this.forms.controls.splice(e,1)}validate(){this.forms.valid?this.register():this.openSm("Aviso!","Rellene los campos")}internalInit(){this.subscribeToParams(),this.setStatusList(),this.addForm()}openSm(e,r){this.modalModel={title:e,description:r},this.modalService.open(this.modalContent,{size:"sm"})}subscribeToParams(){this.route.queryParams.subscribe(e=>{this.questionId=e.questionId})}setStatusList(){this.statusList=[],Object.values(d).forEach(e=>{this.statusList.push(e)})}buildRequest(){return this.forms.value.map(r=>({...r,question:this.questionId}))}register(){this.isLoading=!0;const e=this.buildRequest();this.answerHttpService.createAnswers(e).subscribe({next:r=>{this.handleRegisterSuccess(r)},error:r=>{this.isLoading=!1,this.openSm("Aviso!","Problema al guardar, vuelva a intentarlo")}})}handleRegisterSuccess(e){this.forms.reset(),this.router.navigate(this.questionId?["/questions/question-show/"+this.questionId]:["/answers"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_),t.Y36(l.gz),t.Y36(l.F0),t.Y36(q.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["answers-create-container"]],viewQuery:function(e,r){if(1&e&&t.Gf(y,5),2&e){let o;t.iGM(o=t.CRH())&&(r.modalContent=o.first)}},decls:7,vars:4,consts:[[4,"ngIf","ngIfElse"],["noQuestionId",""],["modalContent",""],[4,"ngIf"],[1,"mb-4"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"d-flex","justify-content-center","mb-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-3"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[1,"button_label"],[3,"form","statusList","index"],[1,"mb-3","text-end"],[1,"btn","btn-danger",3,"click"]],template:function(e,r){if(1&e&&(t.YNc(0,N,3,1,"ng-container",0),t.YNc(1,Q,2,0,"ng-template",null,1,t.W1O),t.YNc(3,F,10,2,"ng-template",null,2,t.W1O),t.YNc(5,L,5,0,"ng-container",3),t.YNc(6,J,9,2,"ng-container",3)),2&e){const o=t.MAs(2);t.Q6J("ngIf",r.questionId)("ngIfElse",o),t.xp6(5),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("ngIf",r.forms&&r.forms.controls.length)}},dependencies:[c.sg,c.O5,w],encapsulation:2}),n})();var g=a(4722);let C=(()=>{class n{constructor(e){this.route=e,this.questionId=""}ngOnInit(){this.internalInit()}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.params.subscribe(e=>{this.questionId=e.questionId})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["answers-container"]],decls:1,vars:0,template:function(e,r){1&e&&t._uU(0,"answers container")},encapsulation:2}),n})();function S(n,s){1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}const Y=function(n){return{questionId:n}};function E(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",11)(4,"a",17),t._uU(5,"Crear respuestas"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.hij(" Pregunta: ",e.answer.question.description," "),t.xp6(2),t.Q6J("routerLink","/answers/answers-create")("queryParams",t.VKq(3,Y,e.answer.question._id))}}function M(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Pregunta:"),t.qZA(),t.TgZ(3,"ol")(4,"li")(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"a",18),t._uU(8,"Ver m\xe1s"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(6),t.Oqu(e.answer.question.description),t.xp6(1),t.Q6J("routerLink","/questions/question-show/"+e.answer.question._id)}}function O(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),t._UZ(5,"p",10),t.TgZ(6,"div",11)(7,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.detete())}),t._uU(8,"Eliminar"),t.qZA()(),t.TgZ(9,"div",11)(10,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.edit())}),t._uU(11,"Actualizar"),t.qZA()(),t.YNc(12,E,6,5,"ng-container",5),t.qZA(),t.TgZ(13,"div",14)(14,"small",15),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"small",15),t._uU(18),t.ALo(19,"date"),t.qZA()()()(),t.TgZ(20,"div",16),t.YNc(21,M,9,2,"ng-container",5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("innerHtml",e.answer.description,t.oJD),t.xp6(7),t.Q6J("ngIf",e.answer.question),t.xp6(3),t.hij("Creado el: ",t.xi3(16,5,e.answer.createdAt,"dd/MM/yyyy")," y "),t.xp6(3),t.hij("actualizado el: ",t.xi3(19,8,e.answer.updatedAt,"dd/MM/yyyy"),""),t.xp6(3),t.Q6J("ngIf",e.answer.question)}}function H(n,s){if(1&n&&t.YNc(0,O,22,11,"ng-container",5),2&n){const e=t.oxw();t.Q6J("ngIf",e.answer)}}let A=(()=>{class n{constructor(e,r,o){this.answerHttpService=e,this.router=r,this.route=o,this.answerId="",this.answer=void 0,this.isLoading=!0}ngOnInit(){this.internalInit()}detete(){window.confirm("\xbfEst\xe1s seguro de que la desea eliminar?")&&this.answerHttpService.deleteAnswer(this.answerId).subscribe({next:e=>{alert(e.data.description+" eliminado correctamente"),this.router.navigate(["/answers"])},error:e=>console.error(e)})}edit(){this.router.navigate(["/answers/answer-edit/"+this.answerId])}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.params.subscribe(e=>{this.answerId=e.id,this.getQuestionById()})}getQuestionById(){this.answerHttpService.getAnswerById(this.answerId).subscribe({next:e=>{this.answer=e.data,this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_),t.Y36(l.F0),t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["answer-show-container"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[4,"ngIf"],[1,"row"],[1,"col-12","col-sm-8"],[1,"card"],[1,"card-body"],[1,"card-text",3,"innerHtml"],[1,"mb-3"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"card-footer"],[1,"text-body-secondary"],[1,"col-12","col-sm-4"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[3,"routerLink"]],template:function(e,r){if(1&e&&(t.YNc(0,S,5,0,"ng-container",0),t.YNc(1,H,1,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[c.O5,l.rH,c.uU],encapsulation:2}),n})();var x=a(9949);function B(n,s){1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function R(n,s){1&n&&(t.TgZ(0,"p",24),t._uU(1," Ingresa la descripci\xf3n"),t.qZA())}function G(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"option",25),t._uU(2),t.qZA(),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function j(n,s){1&n&&(t.TgZ(0,"p",24),t._uU(1,"Selecciona el estado"),t.qZA())}function P(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"option",25),t._uU(2),t.qZA(),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.description)}}function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"form",6)(1,"div",7)(2,"label",8),t._uU(3,"Descripci\xf3n"),t.qZA(),t.TgZ(4,"textarea",9),t._uU(5,"            "),t.qZA(),t.YNc(6,R,2,0,"p",10),t.qZA(),t.TgZ(7,"div",7)(8,"label",11),t._uU(9,"Estado"),t.qZA(),t.TgZ(10,"select",12)(11,"option",13),t._uU(12,"Selectione el status porfavor"),t.qZA(),t.YNc(13,G,3,2,"ng-container",14),t.qZA(),t.YNc(14,j,2,0,"p",10),t.qZA(),t.TgZ(15,"div",7)(16,"div",15),t._UZ(17,"input",16),t.TgZ(18,"label",17),t._uU(19,"Marcar como correcta"),t.qZA()()(),t.TgZ(20,"div",18)(21,"label",19),t._uU(22,"Pregunta"),t.qZA(),t.TgZ(23,"select",20)(24,"option",13),t._uU(25,"Seleccionar pregunta"),t.qZA(),t.YNc(26,P,3,2,"ng-container",14),t.qZA()(),t.TgZ(27,"div",21)(28,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.validate())}),t.TgZ(29,"span",23),t._uU(30," Actualizar "),t.qZA()()()()}if(2&n){const e=t.oxw(2);let r,o;t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("ngIf",(null==(r=e.form.get("description"))?null:r.invalid)&&((null==(r=e.form.get("description"))?null:r.dirty)||(null==(r=e.form.get("description"))?null:r.touched))),t.xp6(7),t.Q6J("ngForOf",e.statusList),t.xp6(1),t.Q6J("ngIf",(null==(o=e.form.get("status"))?null:o.invalid)&&((null==(o=e.form.get("status"))?null:o.dirty)||(null==(o=e.form.get("status"))?null:o.touched))),t.xp6(3),t.Q6J("id","isCorrect"),t.xp6(1),t.Q6J("for","isCorrect"),t.xp6(8),t.Q6J("ngForOf",e.questions),t.xp6(2),t.Q6J("disabled",e.isLoading?"disabled":null)}}function K(n,s){if(1&n&&t.YNc(0,z,31,8,"form",5),2&n){const e=t.oxw();t.Q6J("ngIf",null==e.form?null:e.form.get("description"))}}let v=(()=>{class n{constructor(e,r,o,u){this.questionHttpService=e,this.answerHttpService=r,this.route=o,this.location=u,this.form=new i.cw({}),this.statusList=[],this.answerId="",this.answer=void 0,this.questions=[],this.isLoading=!0}ngOnInit(){this.internalInit()}validate(){this.form.valid?this.register():alert("Formulario invalido o debe seleccionar un tema o un subtema")}internalInit(){this.setAnswerId()}setAnswerId(){this.route.params.subscribe(e=>{this.answerId=e.id,this.getAnswerById()})}getAnswerById(){this.answerHttpService.getAnswerById(this.answerId).subscribe({next:e=>{this.answer=e.data,this.buildForm(),this.setStatusList(),this.isLoading=!1,this.retrieveQuestions()},error:e=>{console.log(e),this.isLoading=!1}})}setStatusList(){this.statusList=[],Object.values(d).forEach(e=>{this.statusList.push(e)})}buildForm(){const e=this.answer.question;this.form=new i.cw({description:new i.NI(this.answer.description,[i.kI.required]),isCorrect:new i.NI(this.answer.isCorrect,[i.kI.required]),status:new i.NI(this.answer.status,[i.kI.required]),question:new i.NI(e?._id,[i.kI.required])})}retrieveQuestions(){this.isLoading=!0,this.questionHttpService.retrieveQuestions().subscribe({next:e=>{this.questions=e.data,this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1}})}buildRequest(){return{_id:this.answerId,...this.form.value}}register(){this.isLoading=!0;const e=this.buildRequest();this.answerHttpService.updateAnswer(e).subscribe({next:r=>{this.handleRegisterSuccess(r)},error:r=>{console.error("err",r),this.isLoading=!1}})}handleRegisterSuccess(e){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.Q),t.Y36(_),t.Y36(l.gz),t.Y36(c.Ye))},n.\u0275cmp=t.Xpm({type:n,selectors:[["answer-edit-container"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","row",3,"formGroup",4,"ngIf"],[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["id","description","autocomplete","description","formControlName","description","placeholder","Descripci\xf3n","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],["for","status",1,"form-label"],["id","status","autocomplete","status","formControlName","status","placeholder","Estado",1,"form-control"],["value",""],[4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","formControlName","isCorrect",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],[1,"col-12","col-sm-6","mb-3"],["for","question",1,"form-label"],["id","question","autocomplete","question","formControlName","question","placeholder","Pregunta",1,"form-control"],[1,"col-12","text-center"],[1,"btn","btn-success",3,"disabled","click"],[1,"button_label"],[1,"text-danger"],[3,"value"]],template:function(e,r){if(1&e&&(t.TgZ(0,"h1"),t._uU(1,"Editar respuesta"),t.qZA(),t.YNc(2,B,5,0,"ng-container",0),t.YNc(3,K,1,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(4);t.xp6(2),t.Q6J("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[c.sg,c.O5,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u],encapsulation:2}),n})();const D=[{path:"",component:C,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"answers-create",component:h,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"answer-show/:id",component:A,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"answer-edit/:id",component:v,data:{roles:[m.F.ADMIN]},canActivate:[g.a]}];let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(D),l.Bz]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:"components",useValue:[C,h,w,A,v],multi:!0},_,x.Q],imports:[c.ez,i.UX,V]}),n})()}}]);