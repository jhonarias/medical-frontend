"use strict";(self.webpackChunkfrontend_practice=self.webpackChunkfrontend_practice||[]).push([[526],{7526:(at,C,u)=>{u.r(C),u.d(C,{QuestionsContainerModule:()=>rt});var c=u(6814),r=u(95),l=u(1076),t=u(9468),d=u(9949);function v(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",4)(2,"div",5)(3,"span",6),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function q(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"li")(2,"a",14),t._uU(3),t.qZA()(),t.BQk()),2&n){const e=i.$implicit;t.xp6(2),t.Q6J("routerLink","/answers/answer-show/"+e._id),t.xp6(1),t.Oqu(e.description)}}function A(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h6"),t._uU(2,"Respuestas"),t.qZA(),t.TgZ(3,"ol"),t.YNc(4,q,4,2,"ng-container",8),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngForOf",e.answers)}}function I(n,i){1&n&&(t.TgZ(0,"h6"),t._uU(1,"No hay respuesta"),t.qZA())}function y(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"a",15)(2,"div",16)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"div",17),t._uU(6,"Tema"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/topics/topic-show/"+e.topic._id),t.xp6(3),t.Oqu(e.topic.name)}}function w(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"a",15)(2,"div",16)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"div",18),t._uU(6,"Subtema"),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink","/topics/subtopic-show/"+e.subtopic._id),t.xp6(3),t.Oqu(e.subtopic.name)}}function J(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"a",9)(2,"p",10),t._uU(3),t.ALo(4,"slice"),t.qZA()(),t.TgZ(5,"div",11),t.YNc(6,A,5,1,"ng-container",2),t.YNc(7,I,2,0,"ng-template",null,12,t.W1O),t.qZA(),t.YNc(9,y,7,2,"ng-container",13),t.YNc(10,w,7,2,"ng-container",13),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(8);t.xp6(1),t.Q6J("routerLink","question-show/"+e._id),t.xp6(2),t.Oqu(e.description.length>30?t.Dn7(4,6,e.description,0,30)+"...":e.description),t.xp6(3),t.Q6J("ngIf",e.answers.length)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",e.topic),t.xp6(1),t.Q6J("ngIf",e.subtopic)}}function U(n,i){if(1&n&&(t.TgZ(0,"div",7),t.YNc(1,J,11,10,"ng-container",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.questions)}}let b=(()=>{class n{constructor(e){this.questionHttpService=e,this.questions=[],this.isLoading=!0}ngOnInit(){this.internalInit()}internalInit(){this.retrieveQuestions()}retrieveQuestions(){this.questionHttpService.retrieveQuestions().subscribe({next:e=>{this.questions=e.data,this.isLoading=!1},error:e=>this.isLoading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["questions-container"]],decls:6,vars:2,consts:[[1,"mb-3"],["routerLink","question-create",1,"btn","btn-primary"],[4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"list-group"],[4,"ngFor","ngForOf"],["aria-current","true",1,"list-group-item","list-group-item-action","active",3,"routerLink"],[1,"mb-1"],[1,"list-group-item","list-group-item-action"],["noAnswers",""],[4,"ngIf"],[3,"routerLink"],[1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"d-flex","w-100","justify-content-between"],[1,"fw-bold","badge","bg-info","d-flex","align-items-center"],[1,"fw-bold","badge","bg-warning","d-flex","align-items-center"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"Crear pregunta"),t.qZA()(),t.YNc(3,v,5,0,"ng-container",2),t.YNc(4,U,2,1,"ng-template",null,3,t.W1O)),2&e){const s=t.MAs(5);t.xp6(3),t.Q6J("ngIf",o.isLoading)("ngIfElse",s)}},dependencies:[c.sg,c.O5,l.rH,c.OU],encapsulation:2}),n})();var m=u(7944),g=u(4722);function S(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function L(n,i){1&n&&(t.ynx(0),t.TgZ(1,"span",20),t._uU(2,"Es correcta"),t.qZA(),t._UZ(3,"br"),t.BQk())}function N(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"li")(2,"p"),t._uU(3),t.ALo(4,"slice"),t.qZA(),t.YNc(5,L,4,0,"ng-container",5),t.TgZ(6,"a",19),t._uU(7,"Ver m\xe1s"),t.qZA()(),t.BQk()),2&n){const e=i.$implicit;t.xp6(3),t.Oqu(e.description.length>30?t.Dn7(4,3,e.description,0,30)+"...":e.description),t.xp6(2),t.Q6J("ngIf",e.isCorrect),t.xp6(1),t.Q6J("routerLink","/answers/answer-show/"+e._id)}}function k(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h2"),t._uU(2,"Respuestas"),t.qZA(),t.TgZ(3,"ol"),t.YNc(4,N,8,7,"ng-container",18),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.question.answers)}}const F=function(n){return{questionId:n}};function Y(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),t._UZ(5,"p",10),t.TgZ(6,"div",11)(7,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.detete())}),t._uU(8,"Eliminar"),t.qZA()(),t.TgZ(9,"div",11)(10,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.edit())}),t._uU(11,"Actualizar"),t.qZA()(),t.TgZ(12,"div",11)(13,"a",14),t._uU(14,"Crear respuestas"),t.qZA()()(),t.TgZ(15,"div",15)(16,"small",16),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"small",16),t._uU(20),t.ALo(21,"date"),t.qZA()()()(),t.TgZ(22,"div",17),t.YNc(23,k,5,1,"ng-container",5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("innerHtml",e.question.description,t.oJD),t.xp6(8),t.Q6J("routerLink","/answers/answers-create")("queryParams",t.VKq(12,F,e.question._id)),t.xp6(4),t.hij("Creado el: ",t.xi3(18,6,e.question.createdAt,"dd/MM/yyyy")," y "),t.xp6(3),t.hij("actualizado el: ",t.xi3(21,9,e.question.updatedAt,"dd/MM/yyyy"),""),t.xp6(3),t.Q6J("ngIf",e.question.answers.length)}}function O(n,i){if(1&n&&t.YNc(0,Y,24,14,"ng-container",5),2&n){const e=t.oxw();t.Q6J("ngIf",e.question)}}let x=(()=>{class n{constructor(e,o,s){this.questionHttpService=e,this.router=o,this.route=s,this.questionId="",this.question=void 0,this.isLoading=!0}ngOnInit(){this.internalInit()}detete(){window.confirm("\xbfEst\xe1s seguro de que la desea eliminar?")&&this.questionHttpService.deleteQuestion(this.questionId).subscribe({next:e=>{alert(e.data.description+" eliminado correctamente"),this.router.navigate(["/questions"])},error:e=>console.error(e)})}edit(){this.router.navigate(["/questions/question-edit/"+this.questionId])}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.params.subscribe(e=>{this.questionId=e.id,this.getQuestionById()})}getQuestionById(){this.questionHttpService.getQuestionById(this.questionId).subscribe({next:e=>{this.question=e.data,this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.Q),t.Y36(l.F0),t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["question-show-container"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[4,"ngIf"],[1,"row"],[1,"col-12","col-sm-8"],[1,"card"],[1,"card-body"],[1,"card-text",3,"innerHtml"],[1,"mb-3"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"card-footer"],[1,"text-body-secondary"],[1,"col-12","col-sm-4"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"badge","bg-primary"]],template:function(e,o){if(1&e&&(t.YNc(0,S,5,0,"ng-container",0),t.YNc(1,O,1,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",o.isLoading)("ngIfElse",s)}},dependencies:[c.sg,c.O5,l.rH,c.OU,c.uU],encapsulation:2}),n})();var p=(()=>((p=p||{}).ACTIVE="Active",p.INACTIVE="Inactive",p))(),h=u(2115);function E(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function B(n,i){1&n&&(t.TgZ(0,"p",24),t._uU(1," Ingresa la descripci\xf3n"),t.qZA())}function M(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",25),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function H(n,i){1&n&&(t.TgZ(0,"p",24),t._uU(1,"Selecciona el estado"),t.qZA())}function R(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",25),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function P(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",25),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",6)(1,"div",7)(2,"label",8),t._uU(3,"Descripci\xf3n"),t.qZA(),t.TgZ(4,"textarea",9),t._uU(5,"            "),t.qZA(),t.YNc(6,B,2,0,"p",10),t.qZA(),t.TgZ(7,"div",7)(8,"label",11),t._uU(9,"Estado"),t.qZA(),t.TgZ(10,"select",12)(11,"option",13),t._uU(12,"Selectione el status porfavor"),t.qZA(),t.YNc(13,M,3,2,"ng-container",14),t.qZA(),t.YNc(14,H,2,0,"p",10),t.qZA(),t.TgZ(15,"div",7)(16,"p",15),t._uU(17,"Debe seleccionar por lo menos un tema o subtema"),t.qZA()(),t.TgZ(18,"div",16)(19,"label",17),t._uU(20,"Tema"),t.qZA(),t.TgZ(21,"select",18)(22,"option",13),t._uU(23,"Seleccionar tema"),t.qZA(),t.YNc(24,R,3,2,"ng-container",14),t.qZA()(),t.TgZ(25,"div",16)(26,"label",19),t._uU(27,"Subtema"),t.qZA(),t.TgZ(28,"select",20)(29,"option",13),t._uU(30,"Seleccionar subtema"),t.qZA(),t.YNc(31,P,3,2,"ng-container",14),t.qZA()(),t.TgZ(32,"div",21)(33,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.validate())}),t.TgZ(34,"span",23),t._uU(35," Actualizar "),t.qZA()()()()}if(2&n){const e=t.oxw(2);let o,s;t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("ngIf",(null==(o=e.form.get("description"))?null:o.invalid)&&((null==(o=e.form.get("description"))?null:o.dirty)||(null==(o=e.form.get("description"))?null:o.touched))),t.xp6(7),t.Q6J("ngForOf",e.statusList),t.xp6(1),t.Q6J("ngIf",(null==(s=e.form.get("status"))?null:s.invalid)&&((null==(s=e.form.get("status"))?null:s.dirty)||(null==(s=e.form.get("status"))?null:s.touched))),t.xp6(10),t.Q6J("ngForOf",e.topics),t.xp6(7),t.Q6J("ngForOf",e.subtopics),t.xp6(2),t.Q6J("disabled",e.isLoading?"disabled":null)}}function j(n,i){if(1&n&&t.YNc(0,$,36,7,"form",5),2&n){const e=t.oxw();t.Q6J("ngIf",null==e.form?null:e.form.get("description"))}}let Q=(()=>{class n{constructor(e,o,s,a){this.questionHttpService=e,this.topicHttpService=o,this.route=s,this.location=a,this.form=new r.cw({}),this.resourceId="",this.statusList=[],this.topics=[],this.subtopics=[],this.question=void 0,this.isLoading=!0}ngOnInit(){this.internalInit()}validate(){this.form.valid?this.register():alert("Formulario invalido o debe seleccionar un tema o un subtema")}internalInit(){this.setResourceId()}setResourceId(){this.route.params.subscribe(e=>{this.resourceId=e.id,this.getQuestionById()})}getQuestionById(){this.questionHttpService.getQuestionById(this.resourceId).subscribe({next:e=>{this.question=e.data,this.buildForm(),this.setStatusList(),this.isLoading=!1,this.retrieveTopics(),this.retrieveSubTopics()},error:e=>{console.log(e),this.isLoading=!1}})}setStatusList(){this.statusList=[],Object.values(p).forEach(e=>{this.statusList.push(e)})}retrieveTopics(){this.isLoading=!0,this.topicHttpService.retrieveTopics().subscribe({next:e=>{this.topics=e.data,this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1}})}retrieveSubTopics(){this.isLoading=!0,this.topicHttpService.retrieveSubTopics().subscribe({next:e=>{this.subtopics=e.data,this.isLoading=!1},error:e=>{console.error(e),this.isLoading=!1}})}buildForm(){this.form=new r.cw({description:new r.NI(this.question.description,[r.kI.required]),status:new r.NI(this.question.status,[r.kI.required]),topic:new r.NI(this.question.topic?._id,[]),subtopic:new r.NI(this.question.subtopic?._id,[])})}buildRequest(){return{_id:this.resourceId,...this.form.value}}register(){const e=this.buildRequest();this.questionHttpService.updateQuestion(e).subscribe({next:o=>{this.handleRegisterSuccess(o)},error:o=>{console.error("err",o)}})}handleRegisterSuccess(e){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.Q),t.Y36(h.J),t.Y36(l.gz),t.Y36(c.Ye))},n.\u0275cmp=t.Xpm({type:n,selectors:[["question-edit-container"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["content",""],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","row",3,"formGroup",4,"ngIf"],[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["id","description","autocomplete","description","formControlName","description","placeholder","Descripci\xf3n","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],["for","status",1,"form-label"],["id","status","autocomplete","status","formControlName","status","placeholder","Estado",1,"form-control"],["value",""],[4,"ngFor","ngForOf"],[1,"text-primary"],[1,"col-12","col-sm-6","mb-3"],["for","topic",1,"form-label"],["id","topic","autocomplete","topic","formControlName","topic","placeholder","Tema",1,"form-control"],["for","subtopic",1,"form-label"],["id","subtopic","autocomplete","subtopic","formControlName","subtopic","placeholder","Subtema",1,"form-control"],[1,"col-12","text-center"],[1,"btn","btn-success",3,"disabled","click"],[1,"button_label"],[1,"text-danger"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h1"),t._uU(1,"Editar pregunta"),t.qZA(),t.YNc(2,E,5,0,"ng-container",0),t.YNc(3,j,1,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(4);t.xp6(2),t.Q6J("ngIf",o.isLoading)("ngIfElse",s)}},dependencies:[c.sg,c.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),n})();var f=u(8994),Z=u(8110);const G=["modalContent"];function D(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"h4",9),t._uU(2),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",11)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",12)(8,"button",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("Close click"))}),t._uU(9,"Cerrar"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.modalModel.title),t.xp6(4),t.Oqu(e.modalModel.description)}}function z(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",14)(2,"div",15)(3,"span",16),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function K(n,i){1&n&&(t.TgZ(0,"p",26),t._uU(1," Ingresa la descripci\xf3n"),t.qZA())}function V(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",27),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function W(n,i){1&n&&(t.TgZ(0,"p",26),t._uU(1,"Selecciona el estado"),t.qZA())}function X(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",27),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function tt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",27),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function et(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19)(2,"p",28),t._uU(3,"Debe seleccionar por lo menos un tema o subtema"),t.qZA()(),t.TgZ(4,"div",29)(5,"label",30),t._uU(6,"Tema"),t.qZA(),t.TgZ(7,"select",31)(8,"option",25),t._uU(9,"Seleccionar tema"),t.qZA(),t.YNc(10,X,3,2,"ng-container",2),t.qZA()(),t.TgZ(11,"div",29)(12,"label",32),t._uU(13,"Subtema"),t.qZA(),t.TgZ(14,"select",33)(15,"option",25),t._uU(16,"Seleccionar subtema"),t.qZA(),t.YNc(17,tt,3,2,"ng-container",2),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",e.topics),t.xp6(7),t.Q6J("ngForOf",e.subtopics)}}function nt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",34)(2,"button",35),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,a=t.oxw();return t.KtG(a.deleteForm(s))}),t._uU(3,"Eliminar pregunta"),t.qZA()(),t.BQk()}}function it(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",17),t._uU(2),t.qZA(),t.TgZ(3,"form",18)(4,"div",19)(5,"label",20),t._uU(6,"Descripci\xf3n"),t.qZA(),t.TgZ(7,"textarea",21),t._uU(8,"            "),t.qZA(),t.YNc(9,K,2,0,"p",22),t.qZA(),t.TgZ(10,"div",19)(11,"label",23),t._uU(12,"Estado"),t.qZA(),t.TgZ(13,"select",24)(14,"option",25),t._uU(15,"Selectione el status porfavor"),t.qZA(),t.YNc(16,V,3,2,"ng-container",2),t.qZA(),t.YNc(17,W,2,0,"p",22),t.qZA(),t.YNc(18,et,18,2,"ng-container",1),t.qZA(),t.YNc(19,nt,4,0,"ng-container",1),t.BQk()),2&n){const e=i.$implicit,o=i.index,s=t.oxw();let a,_;t.xp6(2),t.hij("Pregunta ",o+1,""),t.xp6(1),t.Q6J("formGroup",e),t.xp6(6),t.Q6J("ngIf",(null==(a=e.get("description"))?null:a.invalid)&&((null==(a=e.get("description"))?null:a.dirty)||(null==(a=e.get("description"))?null:a.touched))),t.xp6(7),t.Q6J("ngForOf",s.statusList),t.xp6(1),t.Q6J("ngIf",(null==(_=e.get("status"))?null:_.invalid)&&((null==(_=e.get("status"))?null:_.dirty)||(null==(_=e.get("status"))?null:_.touched))),t.xp6(1),t.Q6J("ngIf",!s.resourceId),t.xp6(1),t.Q6J("ngIf",1!==s.forms.controls.length)}}let T=(()=>{class n{constructor(e,o,s,a,_){this.topicHttpService=e,this.questionHttpService=o,this.route=s,this.location=a,this.modalService=_,this.resourceTypeEnum=f._,this.forms=new r.Oe([]),this.topics=[],this.subtopics=[],this.statusList=[],this.resourceType=f._.TOPIC,this.resourceId="",this.isLoading=!0,this.modalModel={title:"",description:""}}ngOnInit(){this.internalInit()}addForm(){const e=new r.cw({description:new r.NI("",[r.kI.required]),status:new r.NI(p.ACTIVE,[r.kI.required]),topic:new r.NI(this.resourceType===f._.TOPIC?this.resourceId:"",[]),subtopic:new r.NI(this.resourceType===f._.SUBTOPIC?this.resourceId:"",[])});this.forms.push(e)}deleteForm(e){this.forms.controls.splice(e,1)}validate(){this.forms.valid?this.register():this.openSm("Aviso!","Rellene los campos")}openSm(e,o){this.modalModel={title:e,description:o},this.modalService.open(this.modalContent,{size:"sm"})}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.queryParams.subscribe(e=>{this.resourceId=e.resourceId,this.resourceType=e.resourceType,this.setStatusList(),this.retrieveTopics(),this.retrieveSubTopics(),this.addForm()})}setStatusList(){this.statusList=[],Object.values(p).forEach(e=>{this.statusList.push(e)})}retrieveTopics(){this.isLoading=!0,this.topicHttpService.retrieveTopics().subscribe({next:e=>{this.topics=e.data,this.isLoading=!1},error:e=>{this.isLoading=!1,this.openSm("Aviso!","Problema al cargar los temas, vuelva a intentarlo")}})}retrieveSubTopics(){this.isLoading=!0,this.topicHttpService.retrieveSubTopics().subscribe({next:e=>{this.subtopics=e.data,this.isLoading=!1},error:e=>{this.openSm("Aviso!","Problema al cargar los subtemas, vuelva a intentarlo"),this.isLoading=!1}})}buildRequest(){return this.forms.value.map(o=>{let s={description:o.description,status:o.status};return o.topic?s={...s,topic:o.topic}:o.subtopic&&(s={...s,subtopic:o.subtopic}),s})}register(){this.isLoading=!0;const e=this.buildRequest();this.questionHttpService.createQuestion(e).subscribe({next:o=>{this.handleRegisterSuccess(o)},error:o=>{this.isLoading=!1,this.openSm("Aviso!","Problema al guardar, vuelva a intentarlo")}})}handleRegisterSuccess(e){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.J),t.Y36(d.Q),t.Y36(l.gz),t.Y36(c.Ye),t.Y36(Z.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["question-create-container"]],viewQuery:function(e,o){if(1&e&&t.Gf(G,5),2&e){let s;t.iGM(s=t.CRH())&&(o.modalContent=s.first)}},decls:13,vars:3,consts:[["modalContent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-3"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[1,"button_label"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[1,"d-flex","justify-content-center","mb-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-3"],[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["id","description","autocomplete","description","formControlName","description","placeholder","Descripci\xf3n","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],["for","status",1,"form-label"],["id","status","autocomplete","status","formControlName","status","placeholder","Estado",1,"form-control"],["value",""],[1,"text-danger"],[3,"value"],[1,"text-primary"],[1,"col-12","col-sm-6","mb-3"],["for","topic",1,"form-label"],["id","topic","autocomplete","topic","formControlName","topic","placeholder","Tema",1,"form-control"],["for","subtopic",1,"form-label"],["id","subtopic","autocomplete","subtopic","formControlName","subtopic","placeholder","Subtema",1,"form-control"],[1,"mb-3","text-end"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Crear Preguntas"),t.qZA(),t.YNc(2,D,10,2,"ng-template",null,0,t.W1O),t.YNc(4,z,5,0,"ng-container",1),t.YNc(5,it,20,7,"ng-container",2),t.TgZ(6,"div",3)(7,"div",4)(8,"button",5),t.NdJ("click",function(){return o.addForm()}),t._uU(9," Agregar nueva pregunta "),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return o.validate()}),t.TgZ(11,"span",7),t._uU(12," Guardar pregunta(s) "),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngForOf",o.forms.controls),t.xp6(5),t.Q6J("disabled",o.isLoading?"disabled":null))},dependencies:[c.sg,c.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),n})();const ot=[{path:"",component:b,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"question-create",component:T,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"question-show/:id",component:x,data:{roles:[m.F.ADMIN]},canActivate:[g.a]},{path:"question-edit/:id",component:Q,data:{roles:[m.F.ADMIN]},canActivate:[g.a]}];let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(ot),l.Bz]}),n})(),rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:"components",useValue:[b,x,T,Q],multi:!0},h.J,d.Q],imports:[c.ez,r.UX,st,Z.IJ]}),n})()}}]);