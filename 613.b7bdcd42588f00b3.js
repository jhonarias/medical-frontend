"use strict";(self.webpackChunkfrontend_practice=self.webpackChunkfrontend_practice||[]).push([[613],{7613:(k,d,s)=>{s.r(d),s.d(d,{AuthenticationContainerModule:()=>Q});var c=s(6814),f=s(228),u=(()=>((u=u||{}).LOGIN="login",u.REGISTER="register",u))(),e=s(4946),r=s(95),A=s(9126),h=s(1594),Z=s(9862);let v=(()=>{class t extends A.Y{constructor(n){super(n),this.httpClient=n}register(n){return this.post(h.N.apiURLAuthentication,"register",n)}login(n){return this.post(h.N.apiURLAuthentication,"login",n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(Z.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),g=(()=>{class t{constructor(n){this.httpService=n}register(n){return this.httpService.register(n)}login(n){return this.httpService.login(n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var F=s(2373),I=s(5409);function T(t,i){1&t&&(e.TgZ(0,"p",10),e._uU(1,"Ingresa el correo"),e.qZA())}function _(t,i){1&t&&(e.TgZ(0,"p",10),e._uU(1,"Ingresa la contrase\xf1a"),e.qZA())}let b=(()=>{class t{constructor(n,o,l,a){this.authenticationService=n,this.authenticationStorageService=o,this.authenticatedService=l,this.router=a,this.form=new r.cw({}),this.setupEvents()}ngOnInit(){this.internalInit()}setupEvents(){this.authenticatedService.isAuthenticated$.subscribe(n=>{n&&this.router.navigate(["/home"])})}internalInit(){this.buildForm()}buildForm(){this.form=new r.cw({email:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required])})}validate(){this.form.valid?this.login():alert("Ingresa los datos")}buildRequest(){return{...this.form.value}}handleLoginSuccess(n){this.form.reset(),this.authenticationStorageService.setAuthenticationTokenData({...n}),this.authenticatedService.isAuthenticated.next(!0)}login(){const n=this.buildRequest();this.authenticationService.login(n).subscribe({next:o=>{this.handleLoginSuccess(o)},error:o=>{alert("Datos incorrectos"),console.log("err",o)}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(F.y),e.Y36(I.c),e.Y36(f.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["login-form"]],decls:17,vars:3,consts:[[1,"row",3,"formGroup"],[1,"col-12","col-sm-6","mb-3"],["for","email",1,"form-label"],["type","email","id","email","autocomplete","email","formControlName","email","placeholder","nombre@ejemplo.com",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","autocomplete","current-password","formControlName","password","placeholder","******",1,"form-control"],[1,"col-12","text-center"],[1,"btn","btn-success",3,"click"],[1,"button_label"],[1,"text-danger"]],template:function(n,o){if(1&n&&(e.TgZ(0,"h1"),e._uU(1,"Login"),e.qZA(),e.TgZ(2,"form",0)(3,"div",1)(4,"label",2),e._uU(5,"Correo"),e.qZA(),e._UZ(6,"input",3),e.YNc(7,T,2,0,"p",4),e.qZA(),e.TgZ(8,"div",1)(9,"label",5),e._uU(10,"Contrase\xf1a"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,_,2,0,"p",4),e.qZA(),e.TgZ(13,"div",7)(14,"button",8),e.NdJ("click",function(){return o.validate()}),e.TgZ(15,"span",9),e._uU(16," Login "),e.qZA()()()()),2&n){let l,a;e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",(null==(l=o.form.get("email"))?null:l.invalid)&&((null==(l=o.form.get("email"))?null:l.dirty)||(null==(l=o.form.get("email"))?null:l.touched))),e.xp6(5),e.Q6J("ngIf",(null==(a=o.form.get("password"))?null:a.invalid)&&((null==(a=o.form.get("password"))?null:a.dirty)||(null==(a=o.form.get("password"))?null:a.touched)))}},dependencies:[c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),t})();var w=s(7944);function y(t,i){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Ingresa el nombre"),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Ingresa el nombre de usuario"),e.qZA())}function N(t,i){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Ingresa el correo"),e.qZA())}function R(t,i){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Ingresa la contrase\xf1a"),e.qZA())}let U=(()=>{class t{constructor(n,o){this.authenticationService=n,this.router=o,this.form=new r.cw({})}ngOnInit(){this.internalInit()}validate(){this.form.valid?this.register():alert("Llena los datos")}internalInit(){this.buildForm()}buildForm(){this.form=new r.cw({name:new r.NI("",[r.kI.required]),username:new r.NI("",[r.kI.required]),email:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required])})}buildRequest(){return{...this.form.value,role:w.F.USER}}handleRegisterSuccess(n){this.form.reset(),this.router.navigate(["/login"]),console.log("response",n)}register(){const n=this.buildRequest();this.authenticationService.register(n).subscribe({next:o=>{this.handleRegisterSuccess(o)},error:o=>{console.log("err",o)}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(f.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["register-form"]],decls:27,vars:5,consts:[[1,"row",3,"formGroup"],[1,"col-12","col-sm-6","mb-3"],["for","name",1,"form-label"],["type","name","id","name","formControlName","name","placeholder","Nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["for","username",1,"form-label"],["type","username","id","username","autocomplete","username","formControlName","username","placeholder","JohnArias",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","autocomplete","email","formControlName","email","placeholder","nombre@ejemplo.com",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","autocomplete","current-password","formControlName","password","placeholder","******",1,"form-control"],[1,"col-12","text-center"],[1,"btn","btn-success",3,"click"],[1,"button_label"],[1,"text-danger"]],template:function(n,o){if(1&n&&(e.TgZ(0,"h1"),e._uU(1,"Registrar"),e.qZA(),e.TgZ(2,"form",0)(3,"div",1)(4,"label",2),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",3),e.YNc(7,y,2,0,"p",4),e.qZA(),e.TgZ(8,"div",1)(9,"label",5),e._uU(10,"Nombre usuario"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,S,2,0,"p",4),e.qZA(),e.TgZ(13,"div",1)(14,"label",7),e._uU(15,"Correo"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,N,2,0,"p",4),e.qZA(),e.TgZ(18,"div",1)(19,"label",9),e._uU(20,"Contrase\xf1a"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,R,2,0,"p",4),e.qZA(),e.TgZ(23,"div",11)(24,"button",12),e.NdJ("click",function(){return o.validate()}),e.TgZ(25,"span",13),e._uU(26," Registrar "),e.qZA()()()()),2&n){let l,a,m,p;e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",(null==(l=o.form.get("name"))?null:l.invalid)&&((null==(l=o.form.get("name"))?null:l.dirty)||(null==(l=o.form.get("name"))?null:l.touched))),e.xp6(5),e.Q6J("ngIf",(null==(a=o.form.get("username"))?null:a.invalid)&&((null==(a=o.form.get("username"))?null:a.dirty)||(null==(a=o.form.get("username"))?null:a.touched))),e.xp6(5),e.Q6J("ngIf",(null==(m=o.form.get("email"))?null:m.invalid)&&((null==(m=o.form.get("email"))?null:m.dirty)||(null==(m=o.form.get("email"))?null:m.touched))),e.xp6(5),e.Q6J("ngIf",(null==(p=o.form.get("password"))?null:p.invalid)&&((null==(p=o.form.get("password"))?null:p.dirty)||(null==(p=o.form.get("password"))?null:p.touched)))}},dependencies:[c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2}),t})();function q(t,i){1&t&&(e.ynx(0),e._UZ(1,"login-form"),e.BQk())}function J(t,i){1&t&&(e.ynx(0),e._UZ(1,"register-form"),e.BQk())}let C=(()=>{class t{constructor(n){this.router=n,this.formTypeEnum=u,this.formType=u.REGISTER}ngOnInit(){this.internalInit()}internalInit(){this.formType=this.router.url.split("/").pop()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["authentication-container"]],decls:3,vars:2,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,o){1&n&&(e.ynx(0,0),e.YNc(1,q,2,0,"ng-container",1),e.YNc(2,J,2,0,"ng-container",2),e.BQk()),2&n&&(e.Q6J("ngSwitch",o.formType),e.xp6(1),e.Q6J("ngSwitchCase",o.formTypeEnum.LOGIN))},dependencies:[c.RF,c.n9,c.ED,b,U],encapsulation:2}),t})();const L=[{path:"",component:C}];let Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(L),f.Bz]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:"components",useValue:[C],multi:!0},g,v],imports:[c.ez,r.UX,Y]}),t})()}}]);