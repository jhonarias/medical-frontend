"use strict";(self.webpackChunkfrontend_practice=self.webpackChunkfrontend_practice||[]).push([[382],{5795:(G,g,a)=>{a.r(g),a.d(g,{AnswersContainerModule:()=>B});var c=a(6814),s=a(95),u=a(228),p=a(7944),l=(()=>((l=l||{}).ACTIVE="Active",l.INACTIVE="Inactive",l))(),e=a(4946),b=a(9126),d=a(1594),q=a(9862);let m=(()=>{class n extends b.Y{constructor(t){super(t),this.httpClient=t}retrieveAnswers(){return this.get(d.N.apiURLAnswer,"")}getAnswerById(t){return this.get(d.N.apiURLAnswer,t)}updateAnswer(t){return this.put(d.N.apiURLAnswer+"/"+t._id,"",t)}createAnswers(t){return this.post(d.N.apiURLAnswer,"",t)}deleteAnswer(t){return this.delete(d.N.apiURLAnswer+"/"+t,"")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(q.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function I(n,o){1&n&&(e.TgZ(0,"p",11),e._uU(1,"Ingresa la descripci\xf3n"),e.qZA())}function Z(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"option",12),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}let _=(()=>{class n{constructor(){this.form=new s.cw({}),this.statusList=[],this.index=0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["answer-create-form"]],inputs:{form:"form",statusList:"statusList",index:"index"},decls:16,vars:5,consts:[[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description","placeholder","Descripci\xf3n",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","isCorrect",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],["for","status",1,"form-label"],["id","status","autocomplete","status","placeholder","status","formControlName","status",1,"form-control"],[4,"ngFor","ngForOf"],[1,"text-danger"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"label",2),e._uU(3,"Descripci\xf3n"),e.qZA(),e._UZ(4,"textarea",3),e.YNc(5,I,2,0,"p",4),e.qZA(),e.TgZ(6,"div",1)(7,"div",5),e._UZ(8,"input",6),e.TgZ(9,"label",7),e._uU(10,"Marcar como correcta"),e.qZA()()(),e.TgZ(11,"div",1)(12,"label",8),e._uU(13,"Estado"),e.qZA(),e.TgZ(14,"select",9),e.YNc(15,Z,3,2,"ng-container",10),e.qZA()()()),2&t){let i;e.Q6J("formGroup",r.form),e.xp6(5),e.Q6J("ngIf",(null==(i=r.form.get("description"))?null:i.invalid)&&((null==(i=r.form.get("description"))?null:i.dirty)||(null==(i=r.form.get("description"))?null:i.touched))),e.xp6(3),e.Q6J("id","isCorrect"+r.index),e.xp6(1),e.Q6J("for","isCorrect"+r.index),e.xp6(6),e.Q6J("ngForOf",r.statusList)}},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),n})();function T(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.hij("Crear respuesta de la pregunta ",t.questionId,"")}}function y(n,o){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Crear respuesta"),e.qZA())}function F(n,o){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"answer-create-form",9),e.TgZ(2,"div",10)(3,"button",11),e.NdJ("click",function(){const w=e.CHM(t).index,R=e.oxw(2);return e.KtG(R.deleteForm(w))}),e._uU(4,"Eliminar"),e.qZA()(),e.BQk()}if(2&n){const t=o.$implicit,r=o.index,i=e.oxw(2);e.xp6(1),e.Q6J("form",t)("statusList",i.statusList)("index",r)}}function N(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,F,5,3,"ng-container",3),e.TgZ(2,"div",4)(3,"div",5)(4,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addForm())}),e._uU(5,"Agregar respuesta"),e.qZA()(),e.TgZ(6,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.validate())}),e.TgZ(7,"span",8),e._uU(8," Guardar "),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.forms.controls)}}let h=(()=>{class n{constructor(t,r,i){this.answerHttpService=t,this.route=r,this.router=i,this.questionId="",this.forms=new s.Oe([]),this.statusList=[]}ngOnInit(){this.internalInit()}addForm(){const t=new s.cw({description:new s.NI("",[s.kI.required]),isCorrect:new s.NI(!1,[s.kI.required]),status:new s.NI(l.ACTIVE,[s.kI.required])});this.forms.push(t)}deleteForm(t){this.forms.controls.splice(t,1)}validate(){this.forms.valid?this.register():alert("form invalid")}internalInit(){this.subscribeToParams(),this.setStatusList(),this.addForm()}subscribeToParams(){this.route.queryParams.subscribe(t=>{this.questionId=t.questionId})}setStatusList(){this.statusList=[],Object.values(l).forEach(t=>{this.statusList.push(t)})}buildRequest(){return this.forms.value.map(r=>({...r,question:this.questionId}))}register(){const t=this.buildRequest();console.log(t),this.answerHttpService.createAnswers(t).subscribe({next:r=>{this.handleRegisterSuccess(r)},error:r=>console.error(r)})}handleRegisterSuccess(t){this.forms.reset(),this.router.navigate(this.questionId?["/questions/question-show/"+this.questionId]:["/answers"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(u.gz),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["answers-create-container"]],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["noQuestionId",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-3"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-success",3,"click"],[1,"button_label"],[3,"form","statusList","index"],[1,"mb-3","text-end"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){if(1&t&&(e.YNc(0,T,3,1,"ng-container",0),e.YNc(1,y,2,0,"ng-template",null,1,e.W1O),e.YNc(3,N,9,1,"ng-container",2)),2&t){const i=e.MAs(2);e.Q6J("ngIf",r.questionId)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",r.forms&&r.forms.controls.length)}},dependencies:[c.sg,c.O5,_],encapsulation:2}),n})();var f=a(4722);let A=(()=>{class n{constructor(t){this.route=t,this.questionId=""}ngOnInit(){this.internalInit()}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.params.subscribe(t=>{this.questionId=t.questionId})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["answers-container"]],decls:1,vars:0,template:function(t,r){1&t&&e._uU(0,"answers container")},encapsulation:2}),n})();const U=function(n){return{questionId:n}};function J(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"a",12),e._uU(5,"Crear respuestas"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" Pregunta: ",t.answer.question.description," "),e.xp6(2),e.Q6J("routerLink","/answers/answers-create")("queryParams",e.VKq(3,U,t.answer.question._id))}}function Q(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"h2"),e._uU(2,"Pregunta:"),e.qZA(),e.TgZ(3,"ol")(4,"li")(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"a",13),e._uU(8,"Ver m\xe1s"),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(6),e.Oqu(t.answer.question.description),e.xp6(1),e.Q6J("routerLink","/questions/question-show/"+t.answer.question._id)}}function k(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p",5),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.detete())}),e._uU(8,"Eliminar"),e.qZA()(),e.TgZ(9,"div",6)(10,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.edit())}),e._uU(11,"Actualizar"),e.qZA()(),e.YNc(12,J,6,5,"ng-container",0),e.qZA(),e.TgZ(13,"div",9)(14,"small",10),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"small",10),e._uU(18),e.ALo(19,"date"),e.qZA()()()(),e.TgZ(20,"div",11),e.YNc(21,Q,9,2,"ng-container",0),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("innerHtml",t.answer.description,e.oJD),e.xp6(7),e.Q6J("ngIf",t.answer.question),e.xp6(3),e.hij("Creado el: ",e.xi3(16,5,t.answer.createdAt,"dd/MM/yyyy")," y "),e.xp6(3),e.hij("actualizado el: ",e.xi3(19,8,t.answer.updatedAt,"dd/MM/yyyy"),""),e.xp6(3),e.Q6J("ngIf",t.answer.question)}}let C=(()=>{class n{constructor(t,r,i){this.answerHttpService=t,this.router=r,this.route=i,this.answerId="",this.answer=void 0}ngOnInit(){this.internalInit()}detete(){window.confirm("\xbfEst\xe1s seguro de que la desea eliminar?")&&this.answerHttpService.deleteAnswer(this.answerId).subscribe({next:t=>{alert(t.data.description+" eliminado correctamente"),this.router.navigate(["/answers"])},error:t=>console.error(t)})}edit(){this.router.navigate(["/answers/answer-edit/"+this.answerId])}internalInit(){this.subscribeToParams()}subscribeToParams(){this.route.params.subscribe(t=>{this.answerId=t.id,this.getQuestionById()})}getQuestionById(){this.answerHttpService.getAnswerById(this.answerId).subscribe({next:t=>{this.answer=t.data},error:t=>{console.log(t)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(u.F0),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["answer-show-container"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-12","col-sm-8"],[1,"card"],[1,"card-body"],[1,"card-text",3,"innerHtml"],[1,"mb-3"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"card-footer"],[1,"text-body-secondary"],[1,"col-12","col-sm-4"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[3,"routerLink"]],template:function(t,r){1&t&&e.YNc(0,k,22,11,"ng-container",0),2&t&&e.Q6J("ngIf",r.answer)},dependencies:[c.O5,u.rH,c.uU],encapsulation:2}),n})();var x=a(9949);function S(n,o){1&n&&(e.TgZ(0,"p",19),e._uU(1," Ingresa la descripci\xf3n"),e.qZA())}function L(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"option",20),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Y(n,o){1&n&&(e.TgZ(0,"p",19),e._uU(1,"Selecciona el estado"),e.qZA())}function E(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"option",20),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.description)}}function M(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",1)(1,"div",2)(2,"label",3),e._uU(3,"Descripci\xf3n"),e.qZA(),e.TgZ(4,"textarea",4),e._uU(5,"        "),e.qZA(),e.YNc(6,S,2,0,"p",5),e.qZA(),e.TgZ(7,"div",2)(8,"label",6),e._uU(9,"Estado"),e.qZA(),e.TgZ(10,"select",7)(11,"option",8),e._uU(12,"Selectione el status porfavor"),e.qZA(),e.YNc(13,L,3,2,"ng-container",9),e.qZA(),e.YNc(14,Y,2,0,"p",5),e.qZA(),e.TgZ(15,"div",2)(16,"div",10),e._UZ(17,"input",11),e.TgZ(18,"label",12),e._uU(19,"Marcar como correcta"),e.qZA()()(),e.TgZ(20,"div",13)(21,"label",14),e._uU(22,"Pregunta"),e.qZA(),e.TgZ(23,"select",15)(24,"option",8),e._uU(25,"Seleccionar pregunta"),e.qZA(),e.YNc(26,E,3,2,"ng-container",9),e.qZA()(),e.TgZ(27,"div",16)(28,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.validate())}),e.TgZ(29,"span",18),e._uU(30," Actualizar "),e.qZA()()()()}if(2&n){const t=e.oxw();let r,i;e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngIf",(null==(r=t.form.get("description"))?null:r.invalid)&&((null==(r=t.form.get("description"))?null:r.dirty)||(null==(r=t.form.get("description"))?null:r.touched))),e.xp6(7),e.Q6J("ngForOf",t.statusList),e.xp6(1),e.Q6J("ngIf",(null==(i=t.form.get("status"))?null:i.invalid)&&((null==(i=t.form.get("status"))?null:i.dirty)||(null==(i=t.form.get("status"))?null:i.touched))),e.xp6(3),e.Q6J("id","isCorrect"),e.xp6(1),e.Q6J("for","isCorrect"),e.xp6(8),e.Q6J("ngForOf",t.questions)}}let v=(()=>{class n{constructor(t,r,i,w){this.questionHttpService=t,this.answerHttpService=r,this.route=i,this.location=w,this.form=new s.cw({}),this.statusList=[],this.answerId="",this.answer=void 0,this.questions=[]}ngOnInit(){this.internalInit()}validate(){this.form.valid?this.register():alert("Formulario invalido o debe seleccionar un tema o un subtema")}internalInit(){this.setAnswerId()}setAnswerId(){this.route.params.subscribe(t=>{this.answerId=t.id,this.getAnswerById()})}getAnswerById(){this.answerHttpService.getAnswerById(this.answerId).subscribe({next:t=>{this.answer=t.data,this.buildForm(),this.setStatusList(),this.retrieveQuestions()},error:t=>{console.log(t)}})}setStatusList(){this.statusList=[],Object.values(l).forEach(t=>{this.statusList.push(t)})}buildForm(){const t=this.answer.question;this.form=new s.cw({description:new s.NI(this.answer.description,[s.kI.required]),isCorrect:new s.NI(this.answer.isCorrect,[s.kI.required]),status:new s.NI(this.answer.status,[s.kI.required]),question:new s.NI(t?._id,[s.kI.required])})}retrieveQuestions(){this.questionHttpService.retrieveQuestions().subscribe({next:t=>{this.questions=t.data},error:t=>{console.error(t)}})}buildRequest(){return{_id:this.answerId,...this.form.value}}register(){const t=this.buildRequest();this.answerHttpService.updateAnswer(t).subscribe({next:r=>{this.handleRegisterSuccess(r)},error:r=>{console.error("err",r)}})}handleRegisterSuccess(t){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Q),e.Y36(m),e.Y36(u.gz),e.Y36(c.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["answer-edit-container"]],decls:3,vars:1,consts:[["class","row",3,"formGroup",4,"ngIf"],[1,"row",3,"formGroup"],[1,"col-12","mb-3"],["for","description",1,"form-label"],["id","description","autocomplete","description","formControlName","description","placeholder","Descripci\xf3n","rows","3",1,"form-control"],["class","text-danger",4,"ngIf"],["for","status",1,"form-label"],["id","status","autocomplete","status","formControlName","status","placeholder","Estado",1,"form-control"],["value",""],[4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","formControlName","isCorrect",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for"],[1,"col-12","col-sm-6","mb-3"],["for","question",1,"form-label"],["id","question","autocomplete","question","formControlName","question","placeholder","Pregunta",1,"form-control"],[1,"col-12","text-center"],[1,"btn","btn-success",3,"click"],[1,"button_label"],[1,"text-danger"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Editar respuesta"),e.qZA(),e.YNc(2,M,31,7,"form",0)),2&t&&(e.xp6(2),e.Q6J("ngIf",null==r.form?null:r.form.get("description")))},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),n})();const O=[{path:"",component:A,data:{roles:[p.F.ADMIN]},canActivate:[f.a]},{path:"answers-create",component:h,data:{roles:[p.F.ADMIN]},canActivate:[f.a]},{path:"answer-show/:id",component:C,data:{roles:[p.F.ADMIN]},canActivate:[f.a]},{path:"answer-edit/:id",component:v,data:{roles:[p.F.ADMIN]},canActivate:[f.a]}];let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(O),u.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:"components",useValue:[A,h,_,C,v],multi:!0},m,x.Q],imports:[c.ez,s.UX,H]}),n})()}}]);